#【build-config.conf-01】
#!/bin/bash
#【build-config.conf】
# OpenWrt 智能固件构建系统 - 统一配置文件
# 位置: 仓库根目录 /build-config.conf
# 版本: 2.0.0
# 最后更新: 2026-02-23
#
# 使用方法：
# 1. 此文件放在仓库根目录
# 2. 根据需要修改下方的配置值（带 ##常修改## 的是最常修改的项）
# 3. 构建脚本会自动加载此配置
#
# 配置优先级：环境变量 > 此配置文件 > 脚本内默认值
# 如需临时覆盖，可在运行脚本前设置环境变量：
#   export BUILD_DIR="/custom/path"
#   ./firmware-config/scripts/build_firmware_main.sh <命令>
#==================================================
#【build-config.conf-01-end】

#【build-config.conf-02】
#------------------------------------------------------------------------------
# 第一部分：目录路径配置
#   修改这些路径可以改变构建过程中各种文件的存放位置
#   这是最常修改的部分，根据你的实际环境调整
#------------------------------------------------------------------------------

##常修改## 主构建目录 - 所有编译过程的工作目录
##常修改## 要求：至少有20GB可用空间，建议放在高速磁盘上
##常修改## 例如：BUILD_DIR="/ssd/openwrt-build" 或 BUILD_DIR="$HOME/openwrt-build"
: ${BUILD_DIR:="/mnt/openwrt-build"}

##常修改## 日志目录 - 存放构建过程中的日志文件
##常修改## 会自动创建，建议放在有足够空间的位置
: ${LOG_DIR:="/tmp/build-logs"}

##常修改## 备份目录 - 存放配置文件备份
##常修改## 构建前会自动备份现有配置到此目录
: ${BACKUP_DIR:="/tmp/openwrt_backup"}

## 配置文件根目录 - 存放所有.config配置文件的地方
## 通常不需要修改，除非你改变了项目结构
: ${CONFIG_DIR:="$REPO_ROOT/firmware-config/config"}

## 自定义文件目录 - 存放要集成到固件的自定义文件
## 目录结构会原样复制到固件的 /etc/custom-files/ 下
: ${CUSTOM_FILES_DIR:="$REPO_ROOT/firmware-config/custom-files"}
#【build-config.conf-02-end】

#【build-config.conf-03】
#------------------------------------------------------------------------------
# 第二部分：Git仓库URL配置
#   修改这些URL可以更换源码来源（如使用官方OpenWrt或其他分支）
#------------------------------------------------------------------------------

##常修改## 源码仓库选择 (immortalwrt/openwrt/lede)
##常修改## 可选值：
##常修改##   - immortalwrt: ImmortalWrt 仓库
##常修改##   - openwrt: OpenWrt 官方仓库
##常修改##   - lede: LEDE 仓库 (coolsnowwolf/lede)
: ${SOURCE_REPO_TYPE:="immortalwrt"}

## ImmortalWrt 仓库地址
: ${IMMORTALWRT_URL:="https://github.com/immortalwrt/immortalwrt.git"}

## OpenWrt 官方仓库地址
: ${OPENWRT_URL:="https://github.com/openwrt/openwrt.git"}

## LEDE 仓库地址 (coolsnowwolf/lede)
: ${LEDE_URL:="https://github.com/coolsnowwolf/lede.git"}

## 自定义仓库地址（当 SOURCE_REPO_TYPE="custom" 时使用）
: ${CUSTOM_REPO_URL:=""}

## Packages feed 地址 - 包含各种软件包
: ${PACKAGES_FEED_URL:="https://github.com/immortalwrt/packages.git"}

## Luci feed 地址 - Web管理界面
: ${LUCI_FEED_URL:="https://github.com/immortalwrt/luci.git"}

## TurboACC feed 地址 - 网络加速组件（仅normal模式使用）
## 如需禁用TurboACC，可注释掉此行或设置为空
: ${TURBOACC_FEED_URL:="https://github.com/chenmozhijin/turboacc"}
#【build-config.conf-03-end】

#【build-config.conf-04】
#------------------------------------------------------------------------------
# 第三部分：版本分支配置
#   定义不同版本对应的分支名称
#------------------------------------------------------------------------------

## 23.05 版本对应的分支名
: ${BRANCH_23_05:="openwrt-23.05"}

## 21.02 版本对应的分支名
: ${BRANCH_21_02:="openwrt-21.02"}

## LEDE 分支 (coolsnowwolf/lede 固定使用 master)
: ${BRANCH_LEDE:="master"}

## 根据源码类型选择对应的分支映射
get_branch_name() {
    local version_selection="$1"
    local repo_type="${2:-$SOURCE_REPO_TYPE}"
    
    case "$repo_type" in
        "immortalwrt"|"openwrt")
            if [ "$version_selection" = "23.05" ]; then
                echo "openwrt-23.05"
            else
                echo "openwrt-21.02"
            fi
            ;;
        "lede")
            echo "master"
            ;;
        *)
            echo "openwrt-23.05"
            ;;
    esac
}
#【build-config.conf-04-end】

#【build-config.conf-05】
#------------------------------------------------------------------------------
# 第四部分：配置文件名称映射
#   修改这些可以改变脚本查找的配置文件名称
#   注意：这些文件必须存在于 $CONFIG_DIR 目录中
#------------------------------------------------------------------------------

## 基础配置文件 - 所有固件都会包含的配置
: ${CONFIG_BASE:="base.config"}

## 正常模式专用配置文件（启用TurboACC等高级功能）
: ${CONFIG_NORMAL:="normal.config"}

## USB通用配置文件 - 包含基础USB支持
: ${CONFIG_USB_GENERIC:="usb-generic.config"}

## USB特定配置文件（如果存在会覆盖通用配置）
## 格式：usb-{平台名}.config，例如 usb-ipq40xx.config
: ${CONFIG_USB_SPECIFIC_PREFIX:="usb-"}

## 设备配置文件目录 - 存放各设备专用配置
: ${DEVICE_CONFIG_DIR:="devices"}

## 设备配置文件后缀
: ${DEVICE_CONFIG_SUFFIX:=".config"}
#【build-config.conf-05-end】

#【build-config.conf-06】
#------------------------------------------------------------------------------
# 第五部分：内核版本配置 - 动态生成
#   不再硬编码，而是在运行时通过脚本检测
#   以下配置控制检测行为
#------------------------------------------------------------------------------

## 是否启用内核配置动态检测（true/false）
## 设为true时，脚本会自动扫描 target/linux/$TARGET/ 目录下的 config-* 文件
: ${ENABLE_DYNAMIC_KERNEL_DETECTION:="true"}

## 内核配置文件匹配模式
## 用于查找内核配置文件的glob模式
: ${KERNEL_CONFIG_PATTERN:="config-*"}

## 内核版本优先级顺序（用空格分隔）
## 检测到多个内核版本时，按此顺序选择第一个匹配的
## 例如：优先使用6.1，然后是5.15，最后是5.10
: ${KERNEL_VERSION_PRIORITY:="6.6 6.1 5.15 5.10 5.4"}

## 内核配置提取模式
## 定义从内核配置文件提取哪些配置项的正则表达式
## 可以在这里添加更多需要提取的配置模式
KERNEL_EXTRACT_PATTERNS=(
    "^CONFIG_USB_"           # USB相关
    "^CONFIG_PHY_"           # PHY相关
    "^CONFIG_DWC"            # DWC控制器
    "^CONFIG_XHCI"           # XHCI控制器
    "^CONFIG_EXTCON"         # 外部连接器
    "^CONFIG_COMMON_CLK"     # 通用时钟
    "^CONFIG_ARCH_"          # 架构相关
    "^CONFIG_USB_SUPPORT"    # USB支持
    "^CONFIG_USB_COMMON"     # USB通用
)
#【build-config.conf-06-end】

#【build-config.conf-07】
#------------------------------------------------------------------------------
# 第六部分：USB驱动包配置 ##
#   定义各种USB驱动包，可以按需增删
#   这是最常修改的部分，根据你的需求调整USB支持
#------------------------------------------------------------------------------

##常修改## 基础USB驱动包 - 所有平台都需要的基础支持
##常修改## 可以按需增删，用#注释掉不需要的
BASE_USB_PACKAGES=(
    "kmod-usb-core"           # USB核心（必须）
    "kmod-usb-common"         # USB通用（必须）
    "kmod-usb2"               # USB 2.0（必须）
    "kmod-usb3"               # USB 3.0（推荐）
    "kmod-usb-storage"        # USB存储（必须）
    "kmod-scsi-core"          # SCSI核心（必须）
    "block-mount"             # 块设备挂载（推荐）
    "automount"               # 自动挂载（推荐）
    "usbutils"                # USB工具（可选）
)

##常修改## 扩展USB驱动包 - 增强功能（按需启用）
EXTENDED_USB_PACKAGES=(
    "kmod-usb-storage-uas"    # UAS加速（推荐）
    "kmod-usb-storage-extras" # 额外存储协议（可选）
    "kmod-scsi-generic"       # 通用SCSI（可选）
    "kmod-usb-ehci"           # EHCI控制器（可选）
    "kmod-usb-ohci"           # OHCI控制器（可选）
)

##常修改## 文件系统支持 - 用于挂载USB存储设备
##常修改## 根据你的需求选择文件系统支持
FS_SUPPORT_PACKAGES=(
    "kmod-fs-ext4"            # ext4文件系统（推荐）
    "kmod-fs-vfat"            # FAT文件系统（推荐，用于U盘）
    "kmod-fs-exfat"           # exFAT文件系统（推荐，大文件）
    "kmod-fs-ntfs3"           # NTFS文件系统（可选，Windows兼容）
    "kmod-nls-utf8"           # UTF-8编码（必须）
    "kmod-nls-cp936"          # 中文编码（可选，中文文件名）
)
#【build-config.conf-07-end】

#【build-config.conf-08】
#------------------------------------------------------------------------------
# 第七部分：平台专用USB驱动 - 动态生成
#   从support.sh自动获取平台信息，无需手动维护
#   以下配置控制平台驱动的动态生成行为
#------------------------------------------------------------------------------

## 是否启用平台专用驱动动态生成（true/false）
## 设为true时，脚本会从support.sh获取平台信息并自动生成驱动列表
: ${ENABLE_DYNAMIC_PLATFORM_DRIVERS:="true"}

## support.sh脚本路径
: ${SUPPORT_SCRIPT:="$REPO_ROOT/support.sh"}

## 平台驱动映射规则（作为动态生成的补充）
## 格式：PLATFORM_DRIVER_RULES["平台名"]="检测命令"
## 例如：检测高通平台是否需要特定驱动
declare -A PLATFORM_DRIVER_RULES=(
    ["ipq40xx"]="grep -q 'IPQ4019' /proc/cpuinfo 2>/dev/null && echo 'kmod-phy-qcom-ipq4019-usb'"
    ["mediatek"]="grep -q 'MT7981' /proc/cpuinfo 2>/dev/null && echo 'kmod-usb-dwc3-mediatek'"
)
#【build-config.conf-08-end】

#【build-config.conf-09】
#------------------------------------------------------------------------------
# 第八部分：关键驱动列表（用于验证）
#   构建前会检查这些驱动是否启用，缺失会警告
#------------------------------------------------------------------------------

## 必须启用的核心驱动（构建失败条件）
CRITICAL_USB_DRIVERS=(
    "kmod-usb-core"           # USB核心必须
    "kmod-usb2"               # USB 2.0必须（几乎所有设备都有）
    "kmod-usb-storage"        # 存储功能必须
    "kmod-scsi-core"          # SCSI支持必须
)

## 推荐启用的重要驱动（仅警告）
RECOMMENDED_USB_DRIVERS=(
    "kmod-usb3"               # USB 3.0（如果有）
    "kmod-fs-ext4"            # ext4支持
    "block-mount"             # 挂载工具
    "automount"               # 自动挂载
)
#【build-config.conf-09-end】

#【build-config.conf-10】
#------------------------------------------------------------------------------
# 第九部分：设备名称映射 - 动态生成
#   从support.sh自动获取设备列表，无需手动维护
#   以下配置控制设备映射的生成行为
#------------------------------------------------------------------------------

## 是否启用设备映射动态生成（true/false）
## 设为true时，脚本会从support.sh自动获取支持的设备列表
: ${ENABLE_DYNAMIC_DEVICE_MAPPING:="true"}

## support.sh脚本路径（复用上面的定义）
# SUPPORT_SCRIPT 已在上面定义

## 设备映射缓存文件（用于性能优化）
: ${DEVICE_MAP_CACHE:="/tmp/openwrt-device-map.cache"}

## 是否使用缓存（true/false）
## 启用缓存可提高性能，但添加新设备后需要清除缓存
: ${USE_DEVICE_MAP_CACHE:="true"}

## 缓存有效期（秒），3600秒=1小时
: ${DEVICE_MAP_CACHE_TTL:=3600}
#【build-config.conf-10-end】

#【build-config.conf-11】
#------------------------------------------------------------------------------
# 第十部分：编译参数配置 ##
#   控制编译过程的并行度和资源使用
#   根据你的机器性能调整这些值
#------------------------------------------------------------------------------

##常修改## 高性能系统阈值（CPU核心数）
##常修改## 如果CPU核心数 >= 此值，视为高性能系统
: ${HIGH_PERF_CORES:=4}

##常修改## 高性能系统阈值（内存MB）
##常修改## 如果内存MB >= 此值，视为高性能系统
: ${HIGH_PERF_MEM:=4096}

##常修改## 标准系统阈值（CPU核心数）
: ${STD_PERF_CORES:=2}

##常修改## 标准系统阈值（内存MB）
: ${STD_PERF_MEM:=2048}

##常修改## 高性能系统并行任务数
##常修改## 高性能系统使用的编译并行数
: ${HIGH_PERF_JOBS:=4}

##常修改## 标准系统并行任务数
: ${STD_PERF_JOBS:=3}

##常修改## 低性能系统并行任务数
: ${LOW_PERF_JOBS:=2}

##常修改## 下载时的并行任务数上限
##常修改## 下载依赖包时的并发数
: ${MAX_DOWNLOAD_JOBS:=8}
#【build-config.conf-11-end】

#【build-config.conf-12】
#------------------------------------------------------------------------------
# 第十一部分：功能开关 ##
#   控制是否启用某些功能
#   根据需要开启或关闭
#------------------------------------------------------------------------------

##常修改## 是否启用TurboACC（true/false）
##常修改## normal模式下有效，基础模式忽略
: ${ENABLE_TURBOACC:="true"}

##常修改## 是否启用TCP BBR（true/false）
##常修改## 开启BBR拥塞控制算法
: ${ENABLE_TCP_BBR:="true"}

##常修改## 是否强制使用ath10k-ct驱动（解决冲突）
##常修改## 启用后会禁用标准ath10k，使用ct版
: ${FORCE_ATH10K_CT:="true"}

##常修改## 是否自动修复缺失的USB驱动（true/false）
##常修改## 自动添加缺失的关键USB驱动
: ${AUTO_FIX_USB_DRIVERS:="true"}

##常修改## 是否启用详细日志（true/false）
##常修改## 开启后会在编译时显示更详细的输出
: ${ENABLE_VERBOSE_LOG:="false"}
#【build-config.conf-12-end】

#【build-config.conf-13】
#------------------------------------------------------------------------------
# 第十二部分：高级配置
#   一般不需要修改，除非你知道在做什么
#------------------------------------------------------------------------------

## Git配置优化参数
GIT_HTTP_POST_BUFFER="524288000"  # 500MB
GIT_LOW_SPEED_LIMIT="0"
GIT_LOW_SPEED_TIME="999999"

## 下载重试次数
: ${DOWNLOAD_RETRY:=3}

## 编译超时时间（秒），0表示不限制
: ${BUILD_TIMEOUT:=0}

## 是否在失败时保存所有日志
: ${SAVE_LOGS_ON_ERROR:="true"}

## 是否跳过已下载的源码包（true/false）
## 启用后可避免重复下载大文件
: ${SKIP_EXISTING_SOURCE:="true"}
#【build-config.conf-13-end】

#【build-config.conf-14】
#------------------------------------------------------------------------------
# 如何修改此配置文件
#------------------------------------------------------------------------------
#
# 1. **基础修改**（最常用）：
#    - 修改 BUILD_DIR：更改构建目录位置（##常修改##）
#    - 修改 IMMORTALWRT_URL：更换源码仓库（##常修改##）
#    - 修改 ENABLE_TURBOACC：关闭TurboACC（##常修改##）
#    - 修改 BASE_USB_PACKAGES：增减USB驱动（##常修改##）
#
# 2. **添加新设备**（自动从support.sh获取）：
#    - 只需在 support.sh 的 DEVICES 数组中添加新设备
#    - 本配置文件的动态映射会自动识别
#    - 无需手动修改这里的映射表
#
# 3. **添加新平台**（自动从support.sh获取）：
#    - 只需在 support.sh 的 SDK_INFO 中添加对应SDK
#    - 本配置文件的动态平台驱动会识别
#    - 如需补充驱动规则，在 PLATFORM_DRIVER_RULES 中添加
#
# 4. **调整USB支持**（##常修改##）：
#    - 修改 BASE_USB_PACKAGES：增减基础驱动
#    - 修改 FS_SUPPORT_PACKAGES：增减文件系统支持
#    - 用#注释掉不需要的包
#
# 5. **性能调优**（##常修改##）：
#    - 调整 HIGH_PERF_CORES/MEM：改变高性能判断标准
#    - 调整 HIGH_PERF_JOBS：改变并行编译任务数
#    - 根据你的CPU核心数和内存大小设置
#
# 6. **禁用某些功能**（##常修改##）：
#    - 将 ENABLE_TURBOACC 设为 "false"
#    - 将 AUTO_FIX_USB_DRIVERS 设为 "false"
#    - 将 ENABLE_TCP_BBR 设为 "false"
#
# 7. **动态生成控制**：
#    - ENABLE_DYNAMIC_KERNEL_DETECTION：控制内核配置动态检测
#    - ENABLE_DYNAMIC_PLATFORM_DRIVERS：控制平台驱动动态生成
#    - ENABLE_DYNAMIC_DEVICE_MAPPING：控制设备映射动态生成
#
# 注意：修改后无需修改主脚本，重启构建即可生效
#------------------------------------------------------------------------------
#【build-config.conf-14-end】

#【build-config.conf-15】
#==============================================================================
# 动态检测函数（供主脚本调用）
#==============================================================================

# 动态检测内核配置文件
detect_kernel_config() {
    local target="$1"
    local build_dir="$2"
    
    if [ "$ENABLE_DYNAMIC_KERNEL_DETECTION" != "true" ]; then
        return 1
    fi
    
    local kernel_dir="$build_dir/target/linux/$target"
    if [ ! -d "$kernel_dir" ]; then
        return 1
    fi
    
    # 查找所有内核配置文件
    local config_files=($(find "$kernel_dir" -maxdepth 1 -name "$KERNEL_CONFIG_PATTERN" 2>/dev/null | sort -r))
    
    if [ ${#config_files[@]} -eq 0 ]; then
        return 1
    fi
    
    # 按优先级选择内核版本
    for ver in $KERNEL_VERSION_PRIORITY; do
        for file in "${config_files[@]}"; do
            if [[ "$file" == *"config-$ver" ]]; then
                echo "$file"
                return 0
            fi
        done
    done
    
    # 如果没有匹配优先级，返回第一个
    echo "${config_files[0]}"
    return 0
}
#【build-config.conf-15-end】

#【build-config.conf-16】
# 动态获取平台专用驱动
get_platform_drivers() {
    local target="$1"
    
    if [ "$ENABLE_DYNAMIC_PLATFORM_DRIVERS" != "true" ]; then
        return 1
    fi
    
    # 从support.sh获取平台信息
    if [ -f "$SUPPORT_SCRIPT" ]; then
        # 这里可以调用support.sh的特定函数获取平台信息
        # 目前support.sh没有直接提供驱动列表，所以暂时返回空
        # 后续可以在support.sh中添加 get-platform-drivers 函数
        :
    fi
    
    # 应用补充规则
    if [ -n "${PLATFORM_DRIVER_RULES[$target]}" ]; then
        eval "${PLATFORM_DRIVER_RULES[$target]}"
    fi
    
    return 0
}
#【build-config.conf-16-end】

#【build-config.conf-17】
# 动态获取设备映射
get_device_mapping() {
    if [ "$ENABLE_DYNAMIC_DEVICE_MAPPING" != "true" ]; then
        return 1
    fi
    
    # 检查缓存
    if [ "$USE_DEVICE_MAP_CACHE" = "true" ] && [ -f "$DEVICE_MAP_CACHE" ]; then
        local cache_age=$(($(date +%s) - $(stat -c %Y "$DEVICE_MAP_CACHE" 2>/dev/null || echo 0)))
        if [ $cache_age -lt $DEVICE_MAP_CACHE_TTL ]; then
            cat "$DEVICE_MAP_CACHE"
            return 0
        fi
    fi
    
    # 从support.sh获取设备列表
    if [ -f "$SUPPORT_SCRIPT" ]; then
        local temp_file=$(mktemp)
        
        # 调用support.sh列出设备并生成映射
        "$SUPPORT_SCRIPT" list-devices 2>/dev/null | grep -E '^[0-9]+\.' | while read line; do
            # 解析设备名（需要根据support.sh的输出格式调整）
            local device=$(echo "$line" | sed -n 's/.*📱 \([^ ]*\).*/\1/p')
            if [ -n "$device" ]; then
                echo "DEVICE_MAP[\"$device\"]=\"$device\""
            fi
        done > "$temp_file"
        
        # 更新缓存
        if [ -s "$temp_file" ]; then
            if [ "$USE_DEVICE_MAP_CACHE" = "true" ]; then
                cp "$temp_file" "$DEVICE_MAP_CACHE"
            fi
            cat "$temp_file"
            rm -f "$temp_file"
            return 0
        fi
        rm -f "$temp_file"
    fi
    
    return 1
}
#【build-config.conf-17-end】

#【build-config.conf-18】
# 生成动态USB包列表
generate_usb_packages() {
    local target="$1"
    
    # 合并基础包和扩展包
    local all_packages=("${BASE_USB_PACKAGES[@]}" "${EXTENDED_USB_PACKAGES[@]}" "${FS_SUPPORT_PACKAGES[@]}")
    
    # 添加平台专用驱动
    local platform_drivers=$(get_platform_drivers "$target")
    if [ -n "$platform_drivers" ]; then
        all_packages+=($platform_drivers)
    fi
    
    # 去重输出
    printf '%s\n' "${all_packages[@]}" | sort -u
}
#【build-config.conf-18-end】

#【build-config.conf-19】
#==============================================================================
# 配置加载函数（供主脚本调用）
#==============================================================================

load_build_config() {
    local config_file="${1:-$REPO_ROOT/build-config.conf}"
    
    if [ -f "$config_file" ]; then
        echo "📁 加载统一配置文件: $config_file" >&2
        source "$config_file"
    else
        echo "⚠️ 未找到配置文件 $config_file，使用脚本内默认值" >&2
    fi
    
    # 导出所有配置为环境变量，供子进程使用
    export BUILD_DIR LOG_DIR BACKUP_DIR CONFIG_DIR
    export IMMORTALWRT_URL OPENWRT_URL LEDE_URL PACKAGES_FEED_URL LUCI_FEED_URL TURBOACC_FEED_URL
    export ENABLE_TURBOACC ENABLE_TCP_BBR FORCE_ATH10K_CT AUTO_FIX_USB_DRIVERS
    export ENABLE_DYNAMIC_KERNEL_DETECTION ENABLE_DYNAMIC_PLATFORM_DRIVERS ENABLE_DYNAMIC_DEVICE_MAPPING
    export SOURCE_REPO_TYPE
    
    echo "✅ 配置加载完成" >&2
}
#【build-config.conf-19-end】

#【build-config.conf-20】
# 如果直接执行此文件，显示帮助信息
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    echo "OpenWrt 构建系统统一配置文件"
    echo "位置: $(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/$(basename "${BASH_SOURCE[0]}")"
    echo ""
    echo "此文件不应直接执行，应由主脚本 source 加载"
    echo ""
    echo "使用方法："
    echo "  1. 根据需要修改配置值（带 ##常修改## 的是最常修改的项）"
    echo "  2. 在主脚本中添加："
    echo "     source \$REPO_ROOT/build-config.conf"
    echo "     load_build_config"
    echo ""
    echo "主要动态生成特性："
    echo "  ✅ 内核配置动态检测 - 自动扫描 target/linux/ 下的 config-* 文件"
    echo "  ✅ 设备映射动态生成 - 从 support.sh 自动获取设备列表"
    echo "  ✅ 平台驱动动态生成 - 可根据规则自动检测平台专用驱动"
    echo "  ✅ 所有源码类型均使用自带工具链 - 无需下载SDK"
    echo ""
    echo "当前配置摘要："
    echo "  BUILD_DIR = $BUILD_DIR"
    echo "  IMMORTALWRT_URL = $IMMORTALWRT_URL"
    echo "  ENABLE_TURBOACC = $ENABLE_TURBOACC"
    echo "  ENABLE_DYNAMIC_DEVICE_MAPPING = $ENABLE_DYNAMIC_DEVICE_MAPPING"
    echo "  SOURCE_REPO_TYPE = ${SOURCE_REPO_TYPE:-immortalwrt}"
fi
#【build-config.conf-20-end】
