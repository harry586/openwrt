name: OpenWrt 固件构建 - 版本3

on:
  workflow_dispatch:
    inputs:
      device_name:
        description: '设备名称 (如: ac42u, r3g, r4ag)'
        required: true
        default: 'ac42u'
        type: string
      version_selection:
        description: '版本选择: 23.05(最新) 或 21.02(稳定)'
        required: true
        type: choice
        default: '21.02'
        options:
        - '23.05'
        - '21.02'
      config_mode:
        description: '配置模式: 基础模式(文件传输) | 正常模式(完整功能:TurboACC,UPnP,Samba,磁盘管理,KMS,SmartDNS,家长控制,微信推送,SQM,FTP,ARP绑定,CPU限制,硬盘休眠)'
        required: true
        type: choice
        default: 'normal'
        options:
        - 'base'
        - 'normal'
      extra_packages:
        description: '额外插件: +启用插件名; -禁用插件名 (例: +luci-app-wol;+luci-app-ddns)'
        required: false
        type: string
        default: ''
      enable_cache:
        description: '启用编译缓存'
        required: false
        default: true
        type: boolean

jobs:
  test-build:
    runs-on: ubuntu-22.04
    steps:
    - name: 显示输入参数
      run: |
        echo "设备: ${{ github.event.inputs.device_name }}"
        echo "版本: ${{ github.event.inputs.version_selection }}"
        echo "模式: ${{ github.event.inputs.config_mode }}"
        echo "额外包: ${{ github.event.inputs.extra_packages }}"
        echo "缓存: ${{ github.event.inputs.enable_cache }}"
