name: OpenWrt 固件构建 - 版本2

on:
  workflow_dispatch:
    inputs:
      device_name:
        description: '设备名称 (如: ac42u, r3g, r4ag 等)'
        required: true
        default: 'ac42u'
        type: string
      version_selection:
        description: '版本选择'
        required: true
        type: choice
        default: '21.02'
        options:
        - '23.05'
        - '21.02'
      config_mode:
        description: |
          配置模式选择:
          
          [基础模式] - 最小化配置，用于测试编译
          - 文件传输
          
          [正常模式] - 完整功能配置
          - TurboACC 网络加速
          - UPnP 自动端口转发
          - Samba 文件共享
          - 磁盘管理
          - KMS 激活服务
          - SmartDNS 智能DNS
          - 家长控制
          - 微信推送
          - 流量控制 (SQM)
          - FTP 服务器
          - ARP 绑定
          - CPU 限制
          - 硬盘休眠
        required: true
        type: choice
        default: 'normal'
        options:
        - 'base'
        - 'normal'
      extra_packages:
        description: |
          额外安装插件 (用分号;分隔)
          
          启用插件：+插件名
          禁用插件：-插件名
          
          示例：
          +luci-app-wol;+luci-app-ddns;-luci-app-upnp
        required: false
        type: string
        default: ''
      enable_cache:
        description: '启用编译缓存 (加速编译过程)'
        required: false
        default: true
        type: boolean

jobs:
  test-build:
    runs-on: ubuntu-22.04
    steps:
    - name: 显示输入参数
      run: |
        echo "设备: ${{ github.event.inputs.device_name }}"
        echo "版本: ${{ github.event.inputs.version_selection }}"
        echo "模式: ${{ github.event.inputs.config_mode }}"
        echo "额外包: ${{ github.event.inputs.extra_packages }}"
        echo "缓存: ${{ github.event.inputs.enable_cache }}"
